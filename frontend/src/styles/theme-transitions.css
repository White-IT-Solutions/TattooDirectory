/* Theme Transition Styles
 * Smooth transitions between light and dark themes
 * Accessibility-aware with reduced motion support
 */

/* Theme Transition Base */
.theme-transitioning {
  transition: 
    background-color var(--duration-300) var(--ease-out),
    color var(--duration-300) var(--ease-out),
    border-color var(--duration-300) var(--ease-out),
    box-shadow var(--duration-300) var(--ease-out);
}

.theme-transitioning *,
.theme-transitioning *::before,
.theme-transitioning *::after {
  transition: 
    background-color var(--duration-300) var(--ease-out),
    color var(--duration-300) var(--ease-out),
    border-color var(--duration-300) var(--ease-out),
    box-shadow var(--duration-300) var(--ease-out),
    fill var(--duration-300) var(--ease-out),
    stroke var(--duration-300) var(--ease-out) !important;
}

/* High Contrast Mode Enhancements */
.high-contrast {
  /* Increase border contrast */
  --border-primary: var(--color-neutral-900);
  --border-secondary: var(--color-neutral-800);
  --border-muted: var(--color-neutral-700);
  
  /* Increase text contrast */
  --text-muted: var(--color-neutral-800);
  --text-subtle: var(--color-neutral-700);
  
  /* Enhance interactive elements */
  --interactive-primary: var(--color-primary-600);
  --interactive-primary-hover: var(--color-primary-700);
  
  /* Stronger shadows */
  --shadow-sm: 0 2px 4px 0 rgb(0 0 0 / 0.2);
  --shadow: 0 4px 8px 0 rgb(0 0 0 / 0.2);
  --shadow-md: 0 8px 16px 0 rgb(0 0 0 / 0.2);
  --shadow-lg: 0 16px 32px 0 rgb(0 0 0 / 0.2);
}

.dark.high-contrast {
  /* Dark mode high contrast adjustments */
  --border-primary: var(--color-neutral-100);
  --border-secondary: var(--color-neutral-200);
  --border-muted: var(--color-neutral-300);
  
  --text-muted: var(--color-neutral-200);
  --text-subtle: var(--color-neutral-300);
  
  --interactive-primary: var(--color-primary-400);
  --interactive-primary-hover: var(--color-primary-300);
  
  /* Stronger shadows for dark mode */
  --shadow-sm: 0 2px 4px 0 rgb(0 0 0 / 0.5);
  --shadow: 0 4px 8px 0 rgb(0 0 0 / 0.5);
  --shadow-md: 0 8px 16px 0 rgb(0 0 0 / 0.5);
  --shadow-lg: 0 16px 32px 0 rgb(0 0 0 / 0.5);
}

/* Enhanced Focus Indicators */
.enhanced-focus *:focus {
  outline: 3px solid var(--color-accent-500) !important;
  outline-offset: 3px !important;
  box-shadow: 
    0 0 0 6px rgb(239 131 84 / 0.2),
    var(--shadow-md) !important;
}

.enhanced-focus button:focus,
.enhanced-focus a:focus,
.enhanced-focus input:focus,
.enhanced-focus select:focus,
.enhanced-focus textarea:focus {
  transform: scale(1.02);
  z-index: 10;
  position: relative;
}

/* Reduced Motion Overrides */
.reduced-motion .theme-transitioning,
.reduced-motion .theme-transitioning *,
.reduced-motion .theme-transitioning *::before,
.reduced-motion .theme-transitioning *::after {
  transition: none !important;
  animation: none !important;
}

.reduced-motion .enhanced-focus button:focus,
.reduced-motion .enhanced-focus a:focus,
.reduced-motion .enhanced-focus input:focus,
.reduced-motion .enhanced-focus select:focus,
.reduced-motion .enhanced-focus textarea:focus {
  transform: none !important;
}

/* Theme-specific Component Adjustments */

/* Button theme transitions */
.theme-transitioning .btn-base {
  transition: 
    background-color var(--duration-300) var(--ease-out),
    color var(--duration-300) var(--ease-out),
    border-color var(--duration-300) var(--ease-out),
    box-shadow var(--duration-300) var(--ease-out),
    transform var(--duration-200) var(--ease-out);
}

/* Card theme transitions */
.theme-transitioning .card-base {
  transition: 
    background-color var(--duration-300) var(--ease-out),
    border-color var(--duration-300) var(--ease-out),
    box-shadow var(--duration-300) var(--ease-out);
}

/* Input theme transitions */
.theme-transitioning .input-base {
  transition: 
    background-color var(--duration-300) var(--ease-out),
    color var(--duration-300) var(--ease-out),
    border-color var(--duration-300) var(--ease-out),
    box-shadow var(--duration-200) var(--ease-out);
}

/* Navigation theme transitions */
.theme-transitioning nav,
.theme-transitioning .navbar {
  transition: 
    background-color var(--duration-300) var(--ease-out),
    backdrop-filter var(--duration-300) var(--ease-out),
    border-color var(--duration-300) var(--ease-out);
}

/* Modal and overlay theme transitions */
.theme-transitioning .modal-backdrop {
  transition: background-color var(--duration-300) var(--ease-out);
}

.theme-transitioning .modal-content {
  transition: 
    background-color var(--duration-300) var(--ease-out),
    border-color var(--duration-300) var(--ease-out),
    box-shadow var(--duration-300) var(--ease-out);
}

/* Toast theme transitions */
.theme-transitioning .toast-base {
  transition: 
    background-color var(--duration-300) var(--ease-out),
    border-color var(--duration-300) var(--ease-out),
    box-shadow var(--duration-300) var(--ease-out);
}

/* Image and media theme transitions */
.theme-transitioning img,
.theme-transitioning video {
  transition: opacity var(--duration-300) var(--ease-out);
}

/* Dark mode image adjustments */
.dark img:not([data-theme-ignore]) {
  opacity: 0.9;
}

.dark img:not([data-theme-ignore]):hover {
  opacity: 1;
}

/* SVG icon theme transitions */
.theme-transitioning svg {
  transition: 
    fill var(--duration-300) var(--ease-out),
    stroke var(--duration-300) var(--ease-out),
    opacity var(--duration-300) var(--ease-out);
}

/* Code block theme transitions */
.theme-transitioning pre,
.theme-transitioning code {
  transition: 
    background-color var(--duration-300) var(--ease-out),
    color var(--duration-300) var(--ease-out),
    border-color var(--duration-300) var(--ease-out);
}

/* Table theme transitions */
.theme-transitioning table,
.theme-transitioning th,
.theme-transitioning td {
  transition: 
    background-color var(--duration-300) var(--ease-out),
    color var(--duration-300) var(--ease-out),
    border-color var(--duration-300) var(--ease-out);
}

/* Form element theme transitions */
.theme-transitioning label,
.theme-transitioning fieldset,
.theme-transitioning legend {
  transition: color var(--duration-300) var(--ease-out);
}

/* Link theme transitions */
.theme-transitioning a {
  transition: 
    color var(--duration-300) var(--ease-out),
    text-decoration-color var(--duration-300) var(--ease-out);
}

/* Scrollbar theme transitions (Webkit) */
.theme-transitioning ::-webkit-scrollbar-track {
  transition: background-color var(--duration-300) var(--ease-out);
}

.theme-transitioning ::-webkit-scrollbar-thumb {
  transition: background-color var(--duration-300) var(--ease-out);
}

/* Selection theme transitions */
.theme-transitioning ::selection {
  transition: 
    background-color var(--duration-300) var(--ease-out),
    color var(--duration-300) var(--ease-out);
}

/* Placeholder theme transitions */
.theme-transitioning ::placeholder {
  transition: color var(--duration-300) var(--ease-out);
}

/* Theme Toggle Animation */
.theme-toggle-icon {
  transition: transform var(--duration-200) var(--ease-out);
}

.theme-toggle-icon:hover {
  transform: rotate(15deg) scale(1.1);
}

.reduced-motion .theme-toggle-icon:hover {
  transform: none;
}

/* Theme Announcement for Screen Readers */
.theme-announcement {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Print Mode Theme Adjustments */
@media print {
  .theme-transitioning,
  .theme-transitioning *,
  .theme-transitioning *::before,
  .theme-transitioning *::after {
    transition: none !important;
    animation: none !important;
  }
  
  /* Force light theme for printing */
  * {
    background: white !important;
    color: black !important;
    box-shadow: none !important;
  }
}

/* Prefers Color Scheme Transitions */
@media (prefers-color-scheme: dark) {
  :root:not(.light) {
    transition: 
      background-color var(--duration-300) var(--ease-out),
      color var(--duration-300) var(--ease-out);
  }
}

@media (prefers-color-scheme: light) {
  :root:not(.dark) {
    transition: 
      background-color var(--duration-300) var(--ease-out),
      color var(--duration-300) var(--ease-out);
  }
}

/* Theme Loading State */
.theme-loading {
  visibility: hidden;
  opacity: 0;
  transition: 
    visibility 0s linear var(--duration-300),
    opacity var(--duration-300) var(--ease-out);
}

.theme-loaded {
  visibility: visible;
  opacity: 1;
}

/* Custom Theme Variants */
.theme-sepia {
  filter: sepia(0.1) hue-rotate(15deg) saturate(1.1);
}

.theme-blue-light {
  filter: hue-rotate(180deg) saturate(0.8);
}

.theme-warm {
  filter: sepia(0.05) saturate(1.1) hue-rotate(-5deg);
}

.theme-cool {
  filter: hue-rotate(5deg) saturate(0.9);
}